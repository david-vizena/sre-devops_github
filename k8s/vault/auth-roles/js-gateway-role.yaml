apiVersion: v1
kind: ConfigMap
metadata:
  name: vault-js-gateway-role
  namespace: default
  labels:
    app: vault
    component: auth-role
data:
  role.hcl: |
    # Kubernetes auth role for js-gateway service
    # This allows the js-gateway service account to authenticate to Vault
    # and receive the js-gateway-policy

    # To create this role in Vault:
    # kubectl exec -it vault-vault-0 -n data-services -- vault write auth/kubernetes/role/js-gateway \
    #   bound_service_account_names=js-gateway \
    #   bound_service_account_namespaces=default \
    #   policies=js-gateway-policy \
    #   ttl=1h

